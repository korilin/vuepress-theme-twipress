(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{394:function(t,e,a){"use strict";a.r(e);var s=a(2),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("Nginx 可以用来做 Web 服务器或者反向代理，当 Nginx 作为反向代理软件时，每个网络请求都会先由 Nginx 接收，Nginx 会根据配置文件里的配置对请求进行过滤处理，等请求完全接收完再发送给上游服务器一次性处理，从而可以提高上游服务器的工作性能。")]),t._v(" "),a("p",[t._v("以下是 Nginx 常用的一些 http 请求连接的配置。")]),t._v(" "),a("h2",{attrs:{id:"http请求配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http请求配置项"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#Http%E8%AF%B7%E6%B1%82%E9%85%8D%E7%BD%AE%E9%A1%B9"}},[t._v("Http请求配置项")])]),t._v(" "),a("h3",{attrs:{id:"http包头读取超时时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http包头读取超时时间"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#Http%E5%A4%B4%E9%83%A8%E8%AF%BB%E5%8F%96%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4"}},[t._v("Http包头读取超时时间")])]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: client_header_timeout time(默认单位: 秒);\n默认: client_header_timeout 60;\n配置块: http、server、location\n")])])]),a("h3",{attrs:{id:"http包体读取超时时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http包体读取超时时间"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#Http%E5%A4%B4%E9%83%A8%E8%AF%BB%E5%8F%96%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4"}},[t._v("Http包体读取超时时间")])]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: client_body_timeout time(默认单位: 秒);\n默认: client_body_timeout 60;\n配置块: http、server、location\n")])])]),a("h3",{attrs:{id:"http包体最大值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http包体最大值"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#Http%E6%B6%88%E6%81%AF%E4%BD%93%E6%9C%80%E5%A4%A7%E5%80%BC"}},[t._v("Http包体最大值")])]),t._v(" "),a("p",[t._v('该配置影响请求消息体的最大值，Http 包头会有一个 Content-Length 的字段，代表 Http 包体的大小，如果这个值超过了 client_max_body_size 的值，将会中断连接返回 413("Request Entity Too Large") 响应给客户端')]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: client_max_body_size size;\n默认: client_max_body_size 1m;\n配置块: http、server、location\n")])])]),a("h3",{attrs:{id:"请求的限速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求的限速"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E8%AF%B7%E6%B1%82%E7%9A%84%E9%99%90%E9%80%9F"}},[t._v("请求的限速")])]),t._v(" "),a("p",[t._v("限制客户端每秒传输的字节数，0 代表不限速")]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: limit_rate speed;\n默认: limit_rate 0;\n配置块: http、server、location、if\n")])])]),a("h3",{attrs:{id:"响应发送超时时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应发送超时时间"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%93%8D%E5%BA%94%E5%8F%91%E9%80%81%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4"}},[t._v("响应发送超时时间")])]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: send_timeout time;\n默认: send_timeout 60;\n配置块: http、server、location\n")])])]),a("h2",{attrs:{id:"长连接配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#长连接配置项"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%95%BF%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE%E9%A1%B9"}},[t._v("长连接配置项")])]),t._v(" "),a("h3",{attrs:{id:"禁用某些浏览器使用keepalive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#禁用某些浏览器使用keepalive"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E7%A6%81%E7%94%A8%E6%9F%90%E4%BA%9B%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BD%BF%E7%94%A8keepalive"}},[t._v("禁用某些浏览器使用keepalive")])]),t._v(" "),a("p",[t._v("keepalive 可以让多个请求服用一个 HTTP 长连接来提高服务器性能，但是 IE6 及其早期版本、Safari 浏览器对使用 keepalive 功能的 POST 请求处理有问题，所以 Nginx 默认禁用了 keepalive 功能")]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: keepalive_disable [ msie6 | safari | none ]...;\n默认: keepalive_disable msie6 safari;\n配置块: http、server、location\n")])])]),a("h3",{attrs:{id:"keepalive超时时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keepalive超时时间"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#keepalive%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4"}},[t._v("keepalive超时时间")])]),t._v(" "),a("p",[t._v("当一个 keepalive 连接闲置超过一段时间后（默认 75 秒），服务器和浏览器会关闭这个连接，keepalive_timeout 配置项用来约束 Nginx 服务器，Nginx 会按照规范把这个时间传给浏览器")]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: keepalive_timeout time(默认单位: 秒);\n默认: keepalive_timeout 75;\n配置块: http、server、location\n")])])]),a("h3",{attrs:{id:"一个keepalive长连接允许承载的请求最大数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一个keepalive长连接允许承载的请求最大数"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E4%B8%80%E4%B8%AAkeepalive%E9%95%BF%E8%BF%9E%E6%8E%A5%E5%85%81%E8%AE%B8%E6%89%BF%E8%BD%BD%E7%9A%84%E8%AF%B7%E6%B1%82%E6%9C%80%E5%A4%A7%E6%95%B0"}},[t._v("一个keepalive长连接允许承载的请求最大数")])]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: keepalive_requests n;\n默认: keepalive_requests 100;\n配置块: http、server、location\n")])])]),a("h2",{attrs:{id:"连接关闭配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接关闭配置项"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E8%BF%9E%E6%8E%A5%E5%85%B3%E9%97%AD%E9%85%8D%E7%BD%AE%E9%A1%B9"}},[t._v("连接关闭配置项")])]),t._v(" "),a("h3",{attrs:{id:"关闭用户连接的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭用户连接的方式"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%85%B3%E9%97%AD%E7%94%A8%E6%88%B7%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%96%B9%E5%BC%8F"}},[t._v("关闭用户连接的方式")])]),t._v(" "),a("p",[t._v("always: 关闭连接前必须处理连接上所有用户的数据\non: 关闭连接前会处理连接上的用户数据，除了一些情况下业务上认定关闭连接后是不必要的数据\noff: 不管是否已经有准备就绪的用户数据都关闭连接")]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: lingering_close off|on|always;\n默认: lingering_close on;\n配置块: http、server、location\n")])])]),a("h3",{attrs:{id:"连接关闭时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接关闭时间"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E8%BF%9E%E6%8E%A5%E5%85%B3%E9%97%AD%E6%97%B6%E9%97%B4"}},[t._v("连接关闭时间")])]),t._v(" "),a("p",[t._v("在返回响应后经过 lingering_time 设置的时间，Nginx 将不管用户是否仍在上传，都会关闭连接")]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: lingering_time time;\n默认: lingering_time 30s;\n配置块: http、server、location\n")])])]),a("h3",{attrs:{id:"连接关闭延迟"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接关闭延迟"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E8%BF%9E%E6%8E%A5%E5%85%B3%E9%97%AD%E5%BB%B6%E8%BF%9F"}},[t._v("连接关闭延迟")])]),t._v(" "),a("p",[t._v("在关闭连接前，如果超过 lingering_timeout 时间后没有数据可读，直接关闭连接；否则，读取完连接缓冲区上的数据并丢弃后才会关闭连接")]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("语法: lingering_timeout time;\n默认: lingering_timeout 5s;\n配置块: http、server、location\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);