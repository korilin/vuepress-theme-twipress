(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{418:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E7%AE%80%E4%BB%8B"}},[t._v("简介")])]),t._v(" "),a("p",[t._v("Web-MySQL 是一个是基于 PyMySQL 构建出来的一个简单的 SQL 命令执行工具包，用于后端使用 Python 连接数据库的包。")]),t._v(" "),a("p",[t._v("目前为个人为方便进行数据库 CRUD 操作在 PyMySQL 的基础上进行封装，已发布到 PyPi，可以使用 pip 命令进行安装。")]),t._v(" "),a("p",[t._v("主要使用 Connector 类的 executor、fetchone 和 fetchall 这 3 个功能，调用了 PyMySQL 的功能进行自动连接数据库和断开连接。")]),t._v(" "),a("p",[t._v("使用 Web-MySQL 的时候，需要导入 Web-MySQL 的 Connector 类，创建一个对象并初始化数据库配置，就可以调用函数对相应的 MySQL 数据库执行 SQL 命令。")]),t._v(" "),a("p",[t._v("GitHub仓库地址："),a("a",{attrs:{href:"https://github.com/korilin/Web-MySQL",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/korilin/Web-MySQL"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8"}},[t._v("使用")])]),t._v(" "),a("p",[t._v("首先它开发时是采用 Python 3，所以确保你的环境是 Python 3。")]),t._v(" "),a("p",[t._v("可以使用 pip 安装来 Web-MySQL："),a("code",[t._v("pip install Web-MySQL")])]),t._v(" "),a("p",[t._v("使用时推荐将操作这个数据库的函数写在一个单独 Python 文件里，方便函数的管理和引入使用，创建一个全局的 Connector 实例，并修改实例中连接数据库的相应信息变量")]),t._v(" "),a("p",[t._v("调用相应函数传入 SQL 命令和 values 就可以执行数据库操作，当 SQL 命令中没有需要传入的变量时，可不传入 values, 默认 values 为 None。")]),t._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E7%A4%BA%E4%BE%8B"}},[t._v("示例")])]),t._v(" "),a("div",{staticClass:"language-Python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web_mysql "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Connector\n\nconnector "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Connector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconnector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),t._v("\nconnector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v("\nconnector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),t._v("\nconnector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("database "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"insert into users (name,id) values (%s,%s);"')]),t._v("\n  values "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  connector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" values"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from users where name=%s and id=%s;"')]),t._v("\n  values "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" connector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" values"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_users")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from users;"')]),t._v("\n  all_user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" connector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchall"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#建议"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%BB%BA%E8%AE%AE"}},[t._v("建议")])]),t._v(" "),a("p",[t._v("对不同数据库进行操作是应当在不同文件下创建另外一个 connector 实例，这也是为什么要将该数据库的操作函数写在同一个单独的 Python 文件里，这样有利于代码的维护。")]),t._v(" "),a("p",[t._v("当然也可以使用类来代替文件，此时应有多个 Python 类来创建不同的实例去操作不同的数据库")]),t._v(" "),a("h3",{attrs:{id:"相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E7%9B%B8%E5%85%B3"}},[t._v("相关")])]),t._v(" "),a("p",[a("strong",[t._v("PyMySQL："),a("a",{attrs:{href:"https://github.com/PyMySQL/PyMySQL",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/PyMySQL/PyMySQL"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);